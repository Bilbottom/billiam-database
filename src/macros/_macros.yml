---
version: 2

macros:
  - name: create_udfs
    description: >
      Create the UDFs required throughout the project (and beyond!).
    docs:
      show: true
  - name: import
    description: >
      Expand the key-value pairs into the import CTEs.
      
      The CTE names will be the key, and the values will be the relation used in
      the `FROM` clause. If the relation can be found in the information schema,
      the columns of the relation will be specified in the CTE rather than just
      using `SELECT *`.
    docs:
      show: true
  - name: select_star
    description: >
      Construct a `SELECT` statement for the given relation.
      
      If the relation is a string (which should **never** be the case since it's
      bad practise) or if the relation can't be found in the information schema,
      then the select statement will just be `SELECT * FROM <relation>`.
      
      Otherwise, the columns of the relation will be specified in the `SELECT`.
    docs:
      show: true
    arguments:
      - name: relation
        type: str | Relation
        description: >
          The relation to select from.
          
          The explicit database reference _can_ be passed, but this is bad
          practise and should be avoided.
          
          It is expected that this parameter is filled with a `ref` or `source`
          call:
          
          ```jinja
          WITH example_cte AS (
              {{ select_star(ref("my_model")) }}
          )
          ```
